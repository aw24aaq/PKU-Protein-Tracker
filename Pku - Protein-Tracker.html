<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PKU Protein Tracker</title>
    <style>
        /* Styles unchanged except removed Phe-related UI */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        .app-header { text-align: center; color: white; margin-bottom: 30px; }
        .app-header h1 { font-size: 2rem; margin-bottom: 5px; }
        .app-header p { opacity: 0.9; }
        .card { background: white; border-radius: 16px; padding: 24px; margin-bottom: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        .today-summary { display: flex; justify-content: space-between; align-items: center; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white; }
        .summary-item { text-align: center; }
        .summary-value { font-size: 2rem; font-weight: bold; }
        .summary-label { font-size: 0.85rem; opacity: 0.9; }
        .progress-bar { height: 12px; background: rgba(255,255,255,0.3); border-radius: 6px; margin-top: 15px; overflow: hidden; }
        .progress-fill { height: 100%; background: #4ade80; border-radius: 6px; transition: width 0.3s ease; }
        .progress-fill.over-limit { background: #f87171; }
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; margin-bottom: 6px; color: #555; font-weight: 500; }
        .form-group input { width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem; transition: border-color 0.2s; }
        .form-group input:focus { outline: none; border-color: #667eea; }
        .btn { width: 100%; padding: 14px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); }
        .btn:active { transform: translateY(0); }
        .food-list { max-height: 200px; overflow-y: auto; }
        .food-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f9fafb; border-radius: 8px; margin-bottom: 8px; }
        .food-item-info { flex: 1; }
        .food-item-name { font-weight: 500; color: #333; }
        .food-item-details { font-size: 0.85rem; color: #666; }
        .food-item-delete { background: none; border: none; color: #ef4444; cursor: pointer; padding: 8px; font-size: 1.2rem; }
        .history-section { margin-top: 10px; }
        .history-item { display: flex; justify-content: space-between; align-items: center; padding: 14px; background: #f9fafb; border-radius: 8px; margin-bottom: 8px; }
        .history-date { font-weight: 500; color: #333; }
        .history-values { text-align: right; }
        .history-protein { color: #667eea; font-weight: 600; }
        .empty-state { text-align: center; padding: 30px; color: #9ca3af; }
        .goal-settings { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px; }
        .goal-input { display: flex; align-items: center; gap: 8px; }
        .goal-input input { width: 80px; padding: 8px; border: 2px solid #e5e7eb; border-radius: 6px; font-size: 0.9rem; }
        .goal-input span { font-size: 0.85rem; color: #666; }
        .date-nav { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .date-nav button { background: #f3f4f6; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; color: #374151; font-weight: 500; }
        .date-nav button:hover { background: #e5e7eb; }
        .current-date { font-weight: 600; color: #333; }
        .tab-container { display: flex; gap: 8px; margin-bottom: 16px; }
        .tab-btn { flex: 1; padding: 12px; background: #f3f4f6; border: none; border-radius: 8px; cursor: pointer; font-weight: 500; color: #6b7280; transition: all 0.2s; }
        .tab-btn.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body>
    <div class="container">
        <div class="app-header">
            <h1>üçÄ PKU Protein Tracker</h1>
            <p>Track your daily protein intake</p>
        </div>

        <!-- Today's Summary -->
        <div class="card">
            <div class="today-summary">
                <div class="summary-item">
                    <div class="summary-value" id="todayProtein">0g</div>
                    <div class="summary-label">Protein</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value" id="goalPercent">0%</div>
                    <div class="summary-label">of Daily Goal</div>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="card">
            <div class="tab-container">
                <button class="tab-btn active" onclick="switchTab('today')">Today</button>
                <button class="tab-btn" onclick="switchTab('history')">History</button>
                <button class="tab-btn" onclick="switchTab('settings')">Settings</button>
            </div>

            <div class="tab-content active" id="today-tab">
                <div class="date-nav">
                    <button onclick="changeDate(-1)">‚Üê Previous</button>
                    <span class="current-date" id="currentDate">Today</span>
                    <button onclick="changeDate(1)">Next ‚Üí</button>
                </div>

                <div class="form-group">
                    <label>Food Name</label>
                    <input type="text" id="foodName" placeholder="e.g., Apple, Bread, etc.">
                </div>
                <div class="form-group">
                    <label>Protein (g)</label>
                    <input type="number" id="proteinAmount" placeholder="0" step="0.1" min="0">
                </div>
                <button class="btn" onclick="addFoodEntry()">Add Food Entry</button>

                <div class="food-list" id="foodList">
                    <div class="empty-state">No food entries yet today</div>
                </div>
            </div>

            <div class="tab-content" id="history-tab">
                <div class="history-section" id="historyList">
                    <div class="empty-state">No history yet</div>
                </div>
            </div>

            <div class="tab-content" id="settings-tab">
                <div class="card-title">Daily Goals</div>
                <div class="goal-settings">
                    <div class="form-group">
                        <label>Protein Goal (g)</label>
                        <input type="number" id="proteinGoal" value="50" min="1">
                    </div>
                </div>
                <button class="btn" onclick="saveSettings()">Save Settings</button>
            </div>
        </div>
    </div>

    <script>
        let currentDate = new Date().toISOString().split('T')[0];
        let selectedDate = currentDate;

        const defaultSettings = { proteinGoal: 50 };

        function loadData() {
            const settings = localStorage.getItem('pkuSettings');
            return settings ? JSON.parse(settings) : defaultSettings;
        }

        function saveData(settings) { localStorage.setItem('pkuSettings', JSON.stringify(settings)); }

        function getEntries() {
            const entries = localStorage.getItem('pkuEntries');
            return entries ? JSON.parse(entries) : {};
        }

        function saveEntries(entries) { localStorage.setItem('pkuEntries', JSON.stringify(entries)); }

        function getDateEntries(date) {
            const allEntries = getEntries();
            return allEntries[date] || [];
        }

        function saveDateEntry(date, entries) {
            const allEntries = getEntries();
            if (entries.length === 0) delete allEntries[date];
            else allEntries[date] = entries;
            saveEntries(allEntries);
        }

        function updateUI() {
            const settings = loadData();
            const entries = getDateEntries(selectedDate);
            let totalProtein = 0;
            entries.forEach(e => totalProtein += parseFloat(e.protein) || 0);

            document.getElementById('todayProtein').textContent = totalProtein.toFixed(1) + 'g';
            const percent = Math.min(100, (totalProtein / settings.proteinGoal) * 100);
            document.getElementById('goalPercent').textContent = percent.toFixed(1) + '%';

            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = percent + '%';
            progressFill.className = 'progress-fill';
            if (totalProtein > settings.proteinGoal) progressFill.classList.add('over-limit');

            const foodList = document.getElementById('foodList');
            if (entries.length === 0) foodList.innerHTML = '<div class="empty-state">No food entries yet</div>';
            else foodList.innerHTML = entries.map((entry, i) =>
                `<div class="food-item"><div class="food-item-info"><div class="food-item-name">${entry.name}</div><div class="food-item-details">${entry.protein}g protein</div></div><button class="food-item-delete" onclick="deleteEntry(${i})">√ó</button></div>`
            ).join('');

            const dateDisplay = document.getElementById('currentDate');
            if (selectedDate === currentDate) dateDisplay.textContent = 'Today';
            else dateDisplay.textContent = new Date(selectedDate).toLocaleDateString('en-US', { weekday:'short', month:'short', day:'numeric' });

            document.getElementById('proteinGoal').value = settings.proteinGoal;
        }

        function addFoodEntry() {
            const name = document.getElementById('foodName').value.trim();
            const protein = document.getElementById('proteinAmount').value;
            if (!name || !protein) { alert('Enter a food name and protein'); return; }
            const entries = getDateEntries(selectedDate);
            entries.push({ name, protein: parseFloat(protein) });
            saveDateEntry(selectedDate, entries);
            document.getElementById('foodName').value = '';
            document.getElementById('proteinAmount').value = '';
            updateUI();
        }

        function deleteEntry(i) { const entries = getDateEntries(selectedDate); entries.splice(i,1); saveDateEntry(selectedDate, entries); updateUI(); }

        function saveSettings() { const proteinGoal = parseFloat(document.getElementById('proteinGoal').value) || 50; saveData({proteinGoal}); updateUI(); alert('Settings saved!'); }

        function switchTab(tab) { document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active')); document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active')); document.querySelector(`[onclick="switchTab('${tab}')"]`).classList.add('active'); document.getElementById(`${tab}-tab`).classList.add('active'); }
        function changeDate(delta) { const d=new Date(selectedDate); d.setDate(d.getDate()+delta); selectedDate=d.toISOString().split('T')[0]; updateUI(); }

        document.addEventListener('DOMContentLoaded', ()=>{ updateUI(); });
    </script>
</body>
</html>
